@model List<HcPortal.Models.KkjMatrixItem>

@{
    ViewData["Title"] = "Kelola KKJ Matrix";
    ViewData["ContainerClass"] = "container-fluid px-4";
}

@Html.AntiForgeryToken()

<style>
    .custom-scrollbar::-webkit-scrollbar {
        height: 12px;
        width: 12px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }

    .table-responsive.custom-scrollbar {
        max-height: 80vh;
        overflow-x: auto;
        overflow-y: auto;
        border: 1px solid #ddd;
        border-radius: 8px;
    }

    thead th {
        position: sticky;
        top: 0;
        z-index: 20;
    }

    .table-sm td, .table-sm th {
        font-size: 0.85rem;
        padding: 0.5rem 0.6rem;
        vertical-align: middle;
    }
</style>

@* Breadcrumb *@
<nav aria-label="breadcrumb" class="mb-2">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="@Url.Action("Index", "Admin")">Kelola Data</a></li>
        <li class="breadcrumb-item active" aria-current="page">KKJ Matrix</li>
    </ol>
</nav>

@* Page header *@
<div class="d-flex align-items-center justify-content-between mb-3">
    <div>
        <h4 class="fw-bold mb-0">KKJ Matrix</h4>
        <small class="text-muted">Kelola item KKJ Matrix (master kompetensi)</small>
    </div>
    <div>
        <button id="btnEdit" class="btn btn-primary btn-sm">
            <i class="bi bi-pencil me-1"></i>Edit Mode
        </button>
    </div>
</div>

@* Row count *@
<div class="text-muted small mb-2">@Model.Count item(s)</div>

@* Empty state *@
@if (!Model.Any())
{
    <p class="text-muted">Belum ada data KKJ Matrix.</p>
}

@* Read-mode table *@
<div id="readTable">
    <div class="table-responsive custom-scrollbar">
        <table class="table table-sm table-bordered table-hover mb-0">
            <thead class="table-dark">
                <tr>
                    <th style="width: 50px;">No</th>
                    <th style="width: 100px;">Indeks</th>
                    <th>Kompetensi</th>
                    <th style="width: 150px;">SkillGroup</th>
                    <th style="width: 80px;">Aksi</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr data-id="@item.Id">
                        <td>@item.No</td>
                        <td>@item.Indeks</td>
                        <td>@item.Kompetensi</td>
                        <td>@item.SkillGroup</td>
                        <td>
                            <button class="btn btn-outline-danger btn-sm"
                                    onclick="deleteRow(@item.Id, '@Html.Raw(item.Kompetensi.Replace("'", "\\'"))')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@* Edit-mode table placeholder — Plan 02 will inject content *@
<div id="editTable" class="d-none"></div>

@* Edit action buttons placeholder — Plan 02 will inject content *@
<div id="editActions" class="d-none"></div>
