@model HcPortal.Controllers.EligibilityViewModel

@{
    ViewData["Title"] = "Eligibility Validator";
    var isEligible = Model.OverallStatus.Contains("Eligible");
    var statusColor = isEligible ? "success" : "danger";
    var statusIcon = isEligible ? "check-circle-fill" : "x-circle-fill";
}

<div class="row justify-content-center">
    <div class="col-lg-8">
        
        <div class="text-center mb-5">
            <h2 class="fw-bold text-dark mb-2">Eligibility Validator</h2>
            <p class="text-muted">Akselerasi Promosi Validation Tool</p>
        </div>

        <div class="card border-0 shadow-sm mb-4">
            <div class="card-body p-4 text-center bg-light rounded-top">
                <div class="row align-items-center justify-content-center">
                    <div class="col-md-5 text-end border-end pe-4">
                        <small class="text-muted text-uppercase fw-bold">Current Position</small>
                        <h5 class="fw-bold mb-0">@Model.CurrentPosition</h5>
                    </div>
                    <div class="col-md-2">
                        <i class="bi bi-arrow-right fs-3 text-muted"></i>
                    </div>
                    <div class="col-md-5 text-start ps-4">
                        <small class="text-muted text-uppercase fw-bold">Target Position</small>
                        <h5 class="fw-bold mb-0 text-primary">@Model.TargetPosition</h5>
                    </div>
                </div>
            </div>
            
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table mb-0">
                        <thead class="bg-white border-bottom">
                            <tr>
                                <th class="ps-4 py-3">Criteria</th>
                                <th class="py-3">Required</th>
                                <th class="py-3">Your Status</th>
                                <th class="text-center py-3 pe-4">Result</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var criteria in Model.Criteria)
                            {
                                <tr>
                                    <td class="ps-4 py-3">
                                        <div class="fw-bold text-dark">@criteria.Name</div>
                                    </td>
                                    <td class="py-3 text-muted">@criteria.Required</td>
                                    <td class="py-3 fw-bold @(criteria.IsMet ? "text-success" : "text-danger")">@criteria.Actual</td>
                                    <td class="text-center py-3 pe-4">
                                        @if (criteria.IsMet)
                                        {
                                            <i class="bi bi-check-circle-fill text-success fs-5"></i>
                                        }
                                        else
                                        {
                                            <i class="bi bi-x-circle-fill text-danger fs-5"></i>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card-footer bg-white border-0 py-4 text-center">
                <div class="mb-3">
                    <span class="badge bg-@statusColor fs-6 px-3 py-2 rounded-pill">
                        <i class="bi bi-@statusIcon me-2"></i> @Model.OverallStatus
                    </span>
                </div>
                
                @if (isEligible)
                {
                    <button class="btn btn-primary px-5 py-2 fw-bold shadow-sm">Proceed to Assessment</button>
                }
                else
                {
                    <button class="btn btn-outline-secondary px-5 py-2 fw-bold" disabled>Proceed to Assessment</button>
                    <div class="mt-2 small text-muted">Please fulfill all requirements to proceed.</div>
                }
            </div>
        </div>

        <div class="alert alert-info border-0 d-flex align-items-center" role="alert">
            <i class="bi bi-info-circle-fill me-3 fs-3"></i>
            <div>
                <div class="fw-bold">Note:</div>
                This validation is based on current system records. If you believe there is a discrepancy, please contact HC Business Partner.
            </div>
        </div>

    </div>
</div>
